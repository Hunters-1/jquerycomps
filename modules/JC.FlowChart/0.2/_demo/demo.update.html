<!doctype html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>Open JQuery Components Library - suches</title>
        <style>
            body{
                margin: 20px 40px;
            }

            dt { font-weight: bold; margin: 10px auto; }
            dd { line-height: 24px; }
        </style>
        <link href='../../../../modules/JC.FlowChart/0.2/res/default/style.css' rel='stylesheet' />
        <script src="../../../../lib.js"></script>
        <script src="../../../../config.js"></script>

        <script>
            JC.debug = true;
            requirejs( [ 'JC.FlowChart0.2' ], function(){
            });
        </script>
    </head>    
    <body>

        <dl class="defdl">
            <dt>JC.FlowChart - 示例</dt>
            <dd>
                <p>
                    <button onclick="exportData();">导出数据</button>
                </p>
                <div style="width:100%">
                    <div class="js_compFlowChart" 
                        flowchart-control="true"
                        flowchart-edit="true"
                        flowchart-miniview="true"
                        flowchart-data="|script"
                        >
                        <script type="text/template">
                            {
                                "nodes": [
                                    {
                                        "id": "start", 
                                        "type": "start", 
                                        "text": "开始", 
                                        "left": 61, 
                                        "top": 121, 
                                        "w": 100, 
                                        "h": 70
                                    }, 
                                    {
                                        "id": "question1", 
                                        "type": "question", 
                                        "text": "条件判断1", 
                                        "left": 290, 
                                        "top": 79, 
                                        "w": 150, 
                                        "h": 150
                                    }, 
                                    {
                                        "id": "decide", 
                                        "type": "action", 
                                        "text": "活动节点", 
                                        "left": 660, 
                                        "top": 187, 
                                        "w": 120, 
                                        "h": 120
                                    }, 
                                    {
                                        "id": "something", 
                                        "type": "output", 
                                        "text": "输出2", 
                                        "left": 896, 
                                        "top": 551, 
                                        "w": 120, 
                                        "h": 50
                                    }, 
                                    {
                                        "id": "question2", 
                                        "type": "question", 
                                        "text": "条件判断2", 
                                        "left": 74, 
                                        "top": 330, 
                                        "w": 150, 
                                        "h": 150
                                    }, 
                                    {
                                        "id": "nothing", 
                                        "type": "output", 
                                        "text": "输出1", 
                                        "left": 433, 
                                        "top": 558, 
                                        "w": 100, 
                                        "h": 50
                                    }, 
                                    {
                                        "w": 120, 
                                        "h": 80, 
                                        "type": "question", 
                                        "left": 659, 
                                        "top": 403, 
                                        "text": "条件判断3", 
                                        "id": "e49e5782-6ba1-4b10-a0fc-d8cbba09ab73"
                                    }
                                ], 
                                "edges": [
                                    {
                                        "source": "start", 
                                        "target": "question1", 
                                        "data": { }
                                    }, 
                                    {
                                        "source": "question1", 
                                        "target": "decide", 
                                        "data": {
                                            "label": "yes", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "question1", 
                                        "target": "question2", 
                                        "data": {
                                            "label": "no", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "decide", 
                                        "target": "e49e5782-6ba1-4b10-a0fc-d8cbba09ab73", 
                                        "data": {
                                            "label": "condition", 
                                            "id": "0ae75949-fe0c-4455-9a5b-62939eb2e3e4", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "question2", 
                                        "target": "decide", 
                                        "data": {
                                            "label": "no", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "question2", 
                                        "target": "nothing", 
                                        "data": {
                                            "label": "yes", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "e49e5782-6ba1-4b10-a0fc-d8cbba09ab73", 
                                        "target": "nothing", 
                                        "data": {
                                            "label": "yes", 
                                            "id": "888e825a-0957-41fb-aeb4-597febee0905", 
                                            "type": "connection"
                                        }
                                    }, 
                                    {
                                        "source": "e49e5782-6ba1-4b10-a0fc-d8cbba09ab73", 
                                        "target": "something", 
                                        "data": {
                                            "label": "no", 
                                            "id": "ae9a5fe0-8b32-47b2-9cd1-5b69896b940d", 
                                            "type": "connection"
                                        }
                                    }
                                ], 
                                "ports": [ ]
                            }
                        </script>
                    </div>
                </div>
            </dd>
        </dl>
        <script type="text/javascript">
        function exportData() {
            console.log( JSON.parse( JC.FlowChart.exportData( '.js_compFlowChart' ) ) );
        }
        </script>
    </body>
</html>

